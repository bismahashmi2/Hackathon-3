"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[9650],{6863(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"textbook/modules/dynamics-control/labs/lab-05-03","title":"Adaptive Control for Model Uncertainty","description":"Objectives","source":"@site/docs/textbook/modules/05-dynamics-control/labs/lab-05-03.md","sourceDirName":"textbook/modules/05-dynamics-control/labs","slug":"/textbook/modules/dynamics-control/labs/lab-05-03","permalink":"/Hackathon-3/docs/textbook/modules/dynamics-control/labs/lab-05-03","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/textbook/modules/05-dynamics-control/labs/lab-05-03.md","tags":[],"version":"current","frontMatter":{"id":"lab-05-03","module_id":"05","title":"Adaptive Control for Model Uncertainty","difficulty":"challenge","tier":"simulation","duration_minutes":120},"sidebar":"tutorialSidebar","previous":{"title":"Computed Torque Control","permalink":"/Hackathon-3/docs/textbook/modules/dynamics-control/labs/lab-05-02"},"next":{"title":"Dynamics and Control","permalink":"/Hackathon-3/docs/textbook/modules/dynamics-control/dynamics-control"}}');var t=n(4848),l=n(8453);const r={id:"lab-05-03",module_id:"05",title:"Adaptive Control for Model Uncertainty",difficulty:"challenge",tier:"simulation",duration_minutes:120},i="Lab 05-03: Adaptive Control for Model Uncertainty",d={},c=[{value:"Objectives",id:"objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Materials",id:"materials",level:2},{value:"Background",id:"background",level:2},{value:"The Problem with Fixed Models",id:"the-problem-with-fixed-models",level:3},{value:"Adaptive Control Approach",id:"adaptive-control-approach",level:3},{value:"Instructions",id:"instructions",level:2},{value:"Step 1: Create Perturbed Model",id:"step-1-create-perturbed-model",level:3},{value:"Step 2: Observe Non-Adaptive CTC Performance",id:"step-2-observe-non-adaptive-ctc-performance",level:3},{value:"Step 3: Implement Adaptive Law",id:"step-3-implement-adaptive-law",level:3},{value:"Step 4: Implement Adaptive Computed Torque Controller",id:"step-4-implement-adaptive-computed-torque-controller",level:3},{value:"Step 5: Test Adaptive Controller",id:"step-5-test-adaptive-controller",level:3},{value:"Step 6: Analyze Adaptation Convergence",id:"step-6-analyze-adaptation-convergence",level:3},{value:"Expected Outcomes",id:"expected-outcomes",level:2},{value:"Rubric",id:"rubric",level:2},{value:"Common Errors",id:"common-errors",level:2},{value:"Extensions",id:"extensions",level:2},{value:"Related Content",id:"related-content",level:2}];function o(e){const s={annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",math:"math",mi:"mi",mo:"mo",mover:"mover",mrow:"mrow",msub:"msub",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"lab-05-03-adaptive-control-for-model-uncertainty",children:"Lab 05-03: Adaptive Control for Model Uncertainty"})}),"\n",(0,t.jsx)(s.h2,{id:"objectives",children:"Objectives"}),"\n",(0,t.jsx)(s.p,{children:"By the end of this lab, you will be able to:"}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Understand how model uncertainty affects control performance"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Implement adaptive parameter estimation"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Design a model-reference adaptive controller (MRAC)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Analyze convergence and stability of adaptive systems"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Completed Lab 05-02 (Computed Torque Control)"}),"\n",(0,t.jsx)(s.li,{children:"Understanding of Lyapunov stability concepts"}),"\n",(0,t.jsx)(s.li,{children:"Linear algebra proficiency"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"materials",children:"Materials"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Tier"}),(0,t.jsx)(s.th,{children:"Notes"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"software"}),(0,t.jsx)(s.td,{children:"MuJoCo 3.0+"}),(0,t.jsx)(s.td,{children:"required"}),(0,t.jsx)(s.td,{children:"Physics simulation"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"software"}),(0,t.jsx)(s.td,{children:"Python 3.10+"}),(0,t.jsx)(s.td,{children:"required"}),(0,t.jsx)(s.td,{children:"Programming environment"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"software"}),(0,t.jsx)(s.td,{children:"NumPy, SciPy, Matplotlib"}),(0,t.jsx)(s.td,{children:"required"}),(0,t.jsx)(s.td,{children:"Computation and visualization"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"simulation"}),(0,t.jsx)(s.td,{children:"2dof-arm.xml"}),(0,t.jsx)(s.td,{children:"required"}),(0,t.jsx)(s.td,{children:"Two-link planar arm model"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"background",children:"Background"}),"\n",(0,t.jsx)(s.h3,{id:"the-problem-with-fixed-models",children:"The Problem with Fixed Models"}),"\n",(0,t.jsx)(s.p,{children:"Computed torque control requires accurate dynamics knowledge:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Link masses and inertias"}),"\n",(0,t.jsx)(s.li,{children:"Center of mass locations"}),"\n",(0,t.jsx)(s.li,{children:"Friction parameters"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"In practice, these parameters are uncertain or time-varying."}),"\n",(0,t.jsx)(s.h3,{id:"adaptive-control-approach",children:"Adaptive Control Approach"}),"\n",(0,t.jsxs)(s.p,{children:["Instead of fixed parameters, we ",(0,t.jsx)(s.strong,{children:"estimate them online"})," and update the control law:"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{children:"\u03c4"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"M"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{separator:"true",children:","}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"\u03b8"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsxs)(s.msub,{children:[(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{children:"\xa8"})]}),(0,t.jsx)(s.mi,{children:"d"})]}),(0,t.jsx)(s.mo,{children:"+"}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"K"}),(0,t.jsx)(s.mi,{children:"d"})]}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"e"}),(0,t.jsx)(s.mo,{children:"\u02d9"})]}),(0,t.jsx)(s.mo,{children:"+"}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"K"}),(0,t.jsx)(s.mi,{children:"p"})]}),(0,t.jsx)(s.mi,{children:"e"}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsx)(s.mo,{children:"+"}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"C"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{separator:"true",children:","}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{children:"\u02d9"})]}),(0,t.jsx)(s.mo,{separator:"true",children:","}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"\u03b8"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{children:"\u02d9"})]}),(0,t.jsx)(s.mo,{children:"+"}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"g"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:"("}),(0,t.jsx)(s.mi,{children:"q"}),(0,t.jsx)(s.mo,{separator:"true",children:","}),(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"\u03b8"}),(0,t.jsx)(s.mo,{children:"^"})]}),(0,t.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\tau = \\hat{M}(q, \\hat{\\theta})(\\ddot{q}_d + K_d \\dot{e} + K_p e) + \\hat{C}(q, \\dot{q}, \\hat{\\theta})\\dot{q} + \\hat{g}(q, \\hat{\\theta})"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.2079em",verticalAlign:"-0.25em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9468em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2523em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,t.jsx)(s.span,{className:"mpunct",children:","}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9579em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2634em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mclose",children:")"}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"\xa8"})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.1944em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"+"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"e"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.0833em"},children:(0,t.jsx)(s.span,{className:"mord",children:"\u02d9"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"+"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.1514em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mathnormal mtight",children:"p"})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.2861em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,t.jsx)(s.span,{className:"mclose",children:")"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"+"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.2079em",verticalAlign:"-0.25em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9468em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2523em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,t.jsx)(s.span,{className:"mpunct",children:","}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.0556em"},children:(0,t.jsx)(s.span,{className:"mord",children:"\u02d9"})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.1944em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"mpunct",children:","}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9579em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2634em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mclose",children:")"}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6679em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.0556em"},children:(0,t.jsx)(s.span,{className:"mord",children:"\u02d9"})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.1944em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"+"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"1.2079em",verticalAlign:"-0.25em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.6944em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"})]}),(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.2222em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.1944em"},children:(0,t.jsx)(s.span,{})})})]})}),(0,t.jsx)(s.span,{className:"mopen",children:"("}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),(0,t.jsx)(s.span,{className:"mpunct",children:","}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9579em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2634em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})}),(0,t.jsx)(s.span,{className:"mclose",children:")"})]})]})]})}),"\n",(0,t.jsxs)(s.p,{children:["The parameter estimates ",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsxs)(s.mover,{accent:"true",children:[(0,t.jsx)(s.mi,{children:"\u03b8"}),(0,t.jsx)(s.mo,{children:"^"})]})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\hat{\\theta}"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.9579em"}}),(0,t.jsx)(s.span,{className:"mord accent",children:(0,t.jsx)(s.span,{className:"vlist-t",children:(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsxs)(s.span,{className:"vlist",style:{height:"0.9579em"},children:[(0,t.jsxs)(s.span,{style:{top:"-3em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"\u03b8"})]}),(0,t.jsxs)(s.span,{style:{top:"-3.2634em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,t.jsx)(s.span,{className:"accent-body",style:{left:"-0.1667em"},children:(0,t.jsx)(s.span,{className:"mord",children:"^"})})]})]})})})})]})})]})," are updated using an adaptation law derived from stability analysis."]}),"\n",(0,t.jsx)(s.h2,{id:"instructions",children:"Instructions"}),"\n",(0,t.jsx)(s.h3,{id:"step-1-create-perturbed-model",children:"Step 1: Create Perturbed Model"}),"\n",(0,t.jsx)(s.p,{children:"First, create a scenario with model mismatch:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'import mujoco\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Load nominal model\nmodel = mujoco.MjModel.from_xml_path("textbook/assets/robot-models/mujoco/2dof-arm.xml")\ndata = mujoco.MjData(model)\n\n# Store nominal parameters (for controller model)\nnominal_masses = model.body_mass.copy()\nprint(f"Nominal masses: {nominal_masses}")\n\ndef get_dynamics_matrices(model, data):\n    """Extract dynamics matrices from MuJoCo."""\n    nv = model.nv\n    M = np.zeros((nv, nv))\n    mujoco.mj_fullM(model, M, data.qM)\n    mujoco.mj_forward(model, data)\n    bias = data.qfrc_bias.copy()\n    return M, bias\n\ndef perturb_model(model, mass_scale_factor):\n    """\n    Modify model masses to simulate uncertainty.\n\n    Note: This creates a mismatch between controller model and true plant.\n    """\n    # Scale link masses\n    for i in range(model.nbody):\n        model.body_mass[i] *= mass_scale_factor\n\n    # Also scale inertias (roughly)\n    model.body_inertia[:] *= mass_scale_factor\n\n# Create "true" plant with different parameters\nperturb_model(model, mass_scale_factor=1.5)  # 50% heavier than expected\n\nprint(f"Perturbed masses: {model.body_mass}")\nprint(f"Mass mismatch: {(model.body_mass[1] - nominal_masses[1])/nominal_masses[1]*100:.0f}%")\n'})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": Model masses increased by 50%, creating significant mismatch."]})}),"\n",(0,t.jsx)(s.h3,{id:"step-2-observe-non-adaptive-ctc-performance",children:"Step 2: Observe Non-Adaptive CTC Performance"}),"\n",(0,t.jsx)(s.p,{children:"See how standard computed torque fails with model mismatch:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'class StandardCTC:\n    """Computed torque with fixed (incorrect) model."""\n\n    def __init__(self, nominal_model, kp, kd):\n        self.nominal_model = nominal_model\n        self.nominal_data = mujoco.MjData(nominal_model)\n        self.kp = np.atleast_1d(kp) * np.ones(nominal_model.nv)\n        self.kd = np.atleast_1d(kd) * np.ones(nominal_model.nv)\n        self.nv = nominal_model.nv\n\n    def compute(self, q, qd, q_desired, qd_desired, qdd_desired=None):\n        """Compute control using nominal (incorrect) model."""\n        if qdd_desired is None:\n            qdd_desired = np.zeros(self.nv)\n\n        # Copy state to nominal model\n        self.nominal_data.qpos[:self.nv] = q\n        self.nominal_data.qvel[:self.nv] = qd\n\n        # Errors\n        e = q_desired - q\n        ed = qd_desired - qd\n\n        # Desired acceleration\n        qdd_cmd = qdd_desired + self.kd * ed + self.kp * e\n\n        # Get dynamics from NOMINAL model (incorrect!)\n        M_nom, bias_nom = get_dynamics_matrices(self.nominal_model, self.nominal_data)\n\n        # Computed torque\n        tau = M_nom @ qdd_cmd + bias_nom\n\n        return tau, {\'error\': e, \'qdd_cmd\': qdd_cmd}\n\n# Load a fresh nominal model for the controller (unperturbed)\nnominal_model = mujoco.MjModel.from_xml_path("textbook/assets/robot-models/mujoco/2dof-arm.xml")\n\n# Create controller with nominal model\nstandard_ctc = StandardCTC(nominal_model, kp=100, kd=20)\n\ndef run_control_test(model, data, controller, q_target, duration=5.0, label=""):\n    """Run control test and return results."""\n    dt = model.opt.timestep\n    n_steps = int(duration / dt)\n    nv = model.nv\n\n    results = {\n        \'time\': np.zeros(n_steps),\n        \'position\': np.zeros((n_steps, nv)),\n        \'error\': np.zeros((n_steps, nv)),\n        \'torque\': np.zeros((n_steps, nv))\n    }\n\n    mujoco.mj_resetData(model, data)\n\n    for i in range(n_steps):\n        q = data.qpos[:nv].copy()\n        qd = data.qvel[:nv].copy()\n\n        tau, info = controller.compute(q, qd, q_target, np.zeros(nv))\n        data.ctrl[:nv] = tau\n\n        results[\'time\'][i] = data.time\n        results[\'position\'][i] = q\n        results[\'error\'][i] = info[\'error\']\n        results[\'torque\'][i] = tau\n\n        mujoco.mj_step(model, data)\n\n    return results\n\n# Test with model mismatch\ntarget = np.array([np.radians(60), np.radians(-45)])\nresults_standard = run_control_test(model, data, standard_ctc, target, duration=5.0)\n\nprint(f"Standard CTC with model mismatch:")\nprint(f"Final error: {np.degrees(results_standard[\'error\'][-1])} deg")\nprint(f"(Expected: significant error due to 50% mass mismatch)")\n'})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": Noticeable steady-state error or oscillation due to model mismatch."]})}),"\n",(0,t.jsx)(s.h3,{id:"step-3-implement-adaptive-law",children:"Step 3: Implement Adaptive Law"}),"\n",(0,t.jsx)(s.p,{children:"Design the parameter adaptation mechanism:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'class AdaptiveParameters:\n    """\n    Online parameter estimation using gradient descent.\n\n    Estimates the scaling factor for mass/inertia matrix.\n    """\n\n    def __init__(self, nv, initial_scale=1.0, learning_rate=0.5):\n        """\n        Initialize adaptive parameters.\n\n        Args:\n            nv: Number of velocity DOFs\n            initial_scale: Initial mass scale estimate\n            learning_rate: Adaptation gain (Gamma)\n        """\n        self.nv = nv\n\n        # Parameter estimate (scalar for simplicity - scales entire M matrix)\n        self.mass_scale = initial_scale\n\n        # Learning rate\n        self.gamma = learning_rate\n\n        # Parameter bounds (for safety)\n        self.scale_min = 0.5\n        self.scale_max = 3.0\n\n        # History for analysis\n        self.history = []\n\n    def update(self, error, error_dot, regressor):\n        """\n        Update parameter estimate using adaptation law.\n\n        Based on: \u03b8\u0307 = -\u0393 * Y^T * s\n        where s is sliding variable (or error combination)\n\n        Args:\n            error: Position error\n            error_dot: Velocity error\n            regressor: Y matrix relating parameters to dynamics\n\n        Returns:\n            Updated mass scale estimate\n        """\n        # Composite error (sliding variable)\n        lambda_s = 5.0  # Sliding surface slope\n        s = error_dot + lambda_s * error\n\n        # Gradient-based update\n        # For scalar mass scale, regressor is just the acceleration command magnitude\n        grad = np.dot(regressor, s)\n\n        # Update with projection\n        self.mass_scale -= self.gamma * grad * 0.001  # Small step\n        self.mass_scale = np.clip(self.mass_scale, self.scale_min, self.scale_max)\n\n        self.history.append(self.mass_scale)\n\n        return self.mass_scale\n\n    def get_estimate(self):\n        """Get current parameter estimate."""\n        return self.mass_scale\n'})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": Adaptive parameter class with update mechanism and bounds."]})}),"\n",(0,t.jsx)(s.h3,{id:"step-4-implement-adaptive-computed-torque-controller",children:"Step 4: Implement Adaptive Computed Torque Controller"}),"\n",(0,t.jsx)(s.p,{children:"Combine CTC with online adaptation:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'class AdaptiveCTC:\n    """\n    Adaptive Computed Torque Controller.\n\n    Updates mass estimate online to compensate for model uncertainty.\n    """\n\n    def __init__(self, nominal_model, kp, kd, learning_rate=0.5):\n        """\n        Initialize adaptive controller.\n\n        Args:\n            nominal_model: Nominal robot model\n            kp, kd: Control gains\n            learning_rate: Adaptation rate\n        """\n        self.nominal_model = nominal_model\n        self.nominal_data = mujoco.MjData(nominal_model)\n        self.nv = nominal_model.nv\n\n        self.kp = np.atleast_1d(kp) * np.ones(self.nv)\n        self.kd = np.atleast_1d(kd) * np.ones(self.nv)\n\n        # Adaptive parameters\n        self.adaptive = AdaptiveParameters(self.nv, initial_scale=1.0,\n                                           learning_rate=learning_rate)\n\n    def compute(self, q, qd, q_desired, qd_desired, qdd_desired=None):\n        """\n        Compute adaptive control torque.\n\n        Args:\n            q, qd: Current state\n            q_desired, qd_desired: Desired state\n            qdd_desired: Desired acceleration (feedforward)\n\n        Returns:\n            tau: Control torque\n            info: Debug information\n        """\n        if qdd_desired is None:\n            qdd_desired = np.zeros(self.nv)\n\n        # Copy state to nominal model\n        self.nominal_data.qpos[:self.nv] = q\n        self.nominal_data.qvel[:self.nv] = qd\n\n        # Errors\n        e = q_desired - q\n        ed = qd_desired - qd\n\n        # Desired acceleration with feedback\n        qdd_cmd = qdd_desired + self.kd * ed + self.kp * e\n\n        # Get nominal dynamics\n        M_nom, bias_nom = get_dynamics_matrices(self.nominal_model, self.nominal_data)\n\n        # Scale mass matrix with adaptive estimate\n        scale = self.adaptive.get_estimate()\n        M_adapted = scale * M_nom\n\n        # Compute torque with adapted model\n        tau = M_adapted @ qdd_cmd + bias_nom\n\n        # Update adaptation law\n        # Regressor: how torque depends on mass scale (simplified)\n        regressor = M_nom @ qdd_cmd\n        self.adaptive.update(e, ed, regressor)\n\n        info = {\n            \'error\': e,\n            \'error_dot\': ed,\n            \'qdd_cmd\': qdd_cmd,\n            \'mass_scale\': scale\n        }\n\n        return tau, info\n\n# Create adaptive controller\nadaptive_ctc = AdaptiveCTC(nominal_model, kp=100, kd=20, learning_rate=0.3)\n\nprint("Adaptive CTC controller created")\n'})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": AdaptiveCTC class created with adaptation mechanism."]})}),"\n",(0,t.jsx)(s.h3,{id:"step-5-test-adaptive-controller",children:"Step 5: Test Adaptive Controller"}),"\n",(0,t.jsx)(s.p,{children:"Run and compare with standard CTC:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"def run_adaptive_test(model, data, controller, q_target, duration=10.0):\n    \"\"\"Run adaptive control test with extended duration for adaptation.\"\"\"\n    dt = model.opt.timestep\n    n_steps = int(duration / dt)\n    nv = model.nv\n\n    results = {\n        'time': np.zeros(n_steps),\n        'position': np.zeros((n_steps, nv)),\n        'error': np.zeros((n_steps, nv)),\n        'torque': np.zeros((n_steps, nv)),\n        'mass_scale': np.zeros(n_steps)\n    }\n\n    mujoco.mj_resetData(model, data)\n\n    for i in range(n_steps):\n        q = data.qpos[:nv].copy()\n        qd = data.qvel[:nv].copy()\n\n        tau, info = controller.compute(q, qd, q_target, np.zeros(nv))\n        data.ctrl[:nv] = tau\n\n        results['time'][i] = data.time\n        results['position'][i] = q\n        results['error'][i] = info['error']\n        results['torque'][i] = tau\n        results['mass_scale'][i] = info['mass_scale']\n\n        mujoco.mj_step(model, data)\n\n    return results\n\n# Run adaptive controller (longer duration to allow adaptation)\nresults_adaptive = run_adaptive_test(model, data, adaptive_ctc, target, duration=10.0)\n\nprint(f\"\\nAdaptive CTC Results:\")\nprint(f\"Final error: {np.degrees(results_adaptive['error'][-1])} deg\")\nprint(f\"Final mass scale estimate: {results_adaptive['mass_scale'][-1]:.3f}\")\nprint(f\"True mass scale: 1.5 (50% heavier)\")\n"})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": Error should decrease over time as mass estimate converges toward 1.5."]})}),"\n",(0,t.jsx)(s.h3,{id:"step-6-analyze-adaptation-convergence",children:"Step 6: Analyze Adaptation Convergence"}),"\n",(0,t.jsx)(s.p,{children:"Visualize the learning process:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"def plot_adaptive_comparison(results_standard, results_adaptive, true_scale=1.5):\n    \"\"\"Plot comparison of standard vs adaptive control.\"\"\"\n    fig, axes = plt.subplots(3, 1, figsize=(12, 12))\n\n    # Error comparison\n    axes[0].plot(results_standard['time'], np.degrees(results_standard['error'][:, 0]),\n                 'r-', linewidth=2, label='Standard CTC - Joint 0')\n    axes[0].plot(results_adaptive['time'], np.degrees(results_adaptive['error'][:, 0]),\n                 'b-', linewidth=2, label='Adaptive CTC - Joint 0')\n    axes[0].set_ylabel('Error (deg)')\n    axes[0].set_title('Tracking Error Comparison (50% Mass Uncertainty)')\n    axes[0].legend()\n    axes[0].grid(True)\n\n    # Position tracking\n    axes[1].plot(results_adaptive['time'], np.degrees(results_adaptive['position'][:, 0]),\n                 'b-', linewidth=2, label='Actual')\n    axes[1].axhline(y=np.degrees(target[0]), color='k', linestyle='--', label='Target')\n    axes[1].set_ylabel('Position (deg)')\n    axes[1].set_title('Joint 0 Position (Adaptive)')\n    axes[1].legend()\n    axes[1].grid(True)\n\n    # Parameter adaptation\n    axes[2].plot(results_adaptive['time'], results_adaptive['mass_scale'],\n                 'g-', linewidth=2, label='Estimated')\n    axes[2].axhline(y=true_scale, color='r', linestyle='--', linewidth=2, label='True')\n    axes[2].axhline(y=1.0, color='k', linestyle=':', alpha=0.5, label='Nominal')\n    axes[2].set_xlabel('Time (s)')\n    axes[2].set_ylabel('Mass Scale Factor')\n    axes[2].set_title('Parameter Adaptation')\n    axes[2].legend()\n    axes[2].grid(True)\n\n    plt.tight_layout()\n    plt.savefig('adaptive_control_results.png', dpi=150)\n    plt.show()\n\n# Extend standard results for fair comparison (need same length)\nresults_standard_long = run_control_test(model, data, standard_ctc, target, duration=10.0)\n\nplot_adaptive_comparison(results_standard_long, results_adaptive, true_scale=1.5)\n\n# Compute convergence metrics\nfinal_error_std = np.linalg.norm(results_standard_long['error'][-100:].mean(axis=0))\nfinal_error_adapt = np.linalg.norm(results_adaptive['error'][-100:].mean(axis=0))\n\nprint(f\"\\nConvergence Analysis:\")\nprint(f\"Standard CTC average final error: {np.degrees(final_error_std):.3f} deg\")\nprint(f\"Adaptive CTC average final error: {np.degrees(final_error_adapt):.3f} deg\")\nprint(f\"Improvement: {(final_error_std - final_error_adapt) / final_error_std * 100:.1f}%\")\n"})}),"\n",(0,t.jsx)("checkpoint",{children:(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Expected"}),": Adaptive controller shows decreasing error and mass estimate approaching 1.5."]})}),"\n",(0,t.jsx)(s.h2,{id:"expected-outcomes",children:"Expected Outcomes"}),"\n",(0,t.jsx)(s.p,{children:"After completing this lab, you should have:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Code artifacts"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"adaptive_controller.py"}),": Adaptive CTC implementation"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"parameter_estimator.py"}),": Online estimation class"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Visual outputs"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"adaptive_control_results.png"}),": Comparison showing adaptation benefits"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Understanding"}),":"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"How model uncertainty degrades control"}),"\n",(0,t.jsx)(s.li,{children:"Online parameter estimation principles"}),"\n",(0,t.jsx)(s.li,{children:"Stability considerations in adaptive systems"}),"\n",(0,t.jsx)(s.li,{children:"Trade-offs between learning rate and stability"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"rubric",children:"Rubric"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Criterion"}),(0,t.jsx)(s.th,{children:"Points"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Model Perturbation"}),(0,t.jsx)(s.td,{children:"10"}),(0,t.jsx)(s.td,{children:"Correctly creates model mismatch scenario"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Standard CTC Test"}),(0,t.jsx)(s.td,{children:"15"}),(0,t.jsx)(s.td,{children:"Demonstrates degraded performance"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Adaptive Law"}),(0,t.jsx)(s.td,{children:"30"}),(0,t.jsx)(s.td,{children:"Proper gradient-based parameter update"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Adaptive Controller"}),(0,t.jsx)(s.td,{children:"25"}),(0,t.jsx)(s.td,{children:"Working integration of adaptation with CTC"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Convergence Analysis"}),(0,t.jsx)(s.td,{children:"20"}),(0,t.jsx)(s.td,{children:"Clear visualization and metrics"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Total"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"100"})}),(0,t.jsx)(s.td,{})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"common-errors",children:"Common Errors"}),"\n",(0,t.jsxs)("troubleshooting",{children:[(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Error"}),": Parameters diverge or oscillate\n",(0,t.jsx)(s.strong,{children:"Solution"}),": Reduce learning rate (gamma). Too fast adaptation causes instability."]}),(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Error"}),": Adaptation too slow\n",(0,t.jsx)(s.strong,{children:"Solution"}),": Increase learning rate or ensure regressor is properly scaled."]}),(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Error"}),": Estimate converges to wrong value\n",(0,t.jsx)(s.strong,{children:"Solution"}),": Check regressor computation. May need richer excitation (varied trajectories)."]})]}),"\n",(0,t.jsx)(s.h2,{id:"extensions",children:"Extensions"}),"\n",(0,t.jsx)(s.p,{children:"For advanced students:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Multi-parameter Estimation"}),": Estimate separate scales for each link"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Robust Adaptive Control"}),": Add sliding mode term for unmodeled dynamics"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Persistent Excitation"}),": Analyze when parameters are identifiable"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Neural Network Adaptation"}),": Replace linear adaptation with learned model"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"related-content",children:"Related Content"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Theory"}),": Module 05 theory.md, Section 5.6 (Adaptive Control)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Previous Labs"}),": Lab 05-01 (PID), Lab 05-02 (CTC)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Application"}),": See MIT Humanoid Lab case study for adaptive locomotion control"]}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,s,n){n.d(s,{R:()=>r,x:()=>i});var a=n(6540);const t={},l=a.createContext(t);function r(e){const s=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(l.Provider,{value:s},e.children)}}}]);